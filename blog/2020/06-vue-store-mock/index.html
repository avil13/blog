<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">
    <title>Vuex + Jest.mock | AVIL13.com</title>
<meta name="description" content="Jest.mock –≤–º–µ—Å—Ç–µ —Å Vuex - –ø—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è">
<link rel="canonical" href="https://avil13.com/blog/2020/06-vue-store-mock/">


<meta property="og:url" content="https://avil13.com/blog/2020/06-vue-store-mock/">
<meta property="og:type" content="article">
<meta property="og:title" content="Vuex + Jest.mock">
<meta property="og:description" content="Jest.mock –≤–º–µ—Å—Ç–µ —Å Vuex - –ø—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è">
<meta property="og:image" content="https://avil13.com/images/graph/avil13-graph-bg.jpg">


<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="https://avil13.com">
<meta property="twitter:url" content="https://avil13.com/blog/2020/06-vue-store-mock/">
<meta name="twitter:title" content="Vuex + Jest.mock">
<meta name="twitter:description" content="Jest.mock –≤–º–µ—Å—Ç–µ —Å Vuex - –ø—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è">
<meta name="twitter:image" content="https://avil13.com/images/graph/avil13-graph-bg.jpg">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/app-icon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/images/app-icon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/images/app-icon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/images/app-icon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/images/app-icon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/images/app-icon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/app-icon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/images/app-icon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/app-icon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/images/app-icon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/app-icon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/app-icon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/app-icon/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileImage" content="/images/app-icon/ms-icon-144x144.png">


    <!-- analitycs   --><meta name="yandex-verification" content="site.seo.yandexVerification">
<meta name="google-site-verification" content="site.seo.googleVerification">

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
  setTimeout(
    function (m, e, t, r, i, k, a) {
      console.log("=>", { arguments });

      for (var j = 0; j < document.scripts.length; j++) {
        if (document.scripts[j].src === r) {
          return;
        }
      }

      m[i] =
        m[i] ||
        function () {
          (m[i].a = m[i].a || []).push(arguments);
        };
      m[i].l = Date.now();

      (k = e.createElement(t)),
        (a = e.getElementsByTagName(t)[0]),
        (k.async = 1),
        (k.src = r),
        a.parentNode.insertBefore(k, a);

      // RUN
      ym(91122403, "init", {
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
      });
    },
    100,
    [window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"]
  );
</script>
<noscript><div>
    <img src="https://mc.yandex.ru/watch/91122403" style="position:absolute; left:-9999px;" alt="">
  </div>
</noscript>
<!-- /Yandex.Metrika counter -->
  <link rel="stylesheet" href="/assets/06-vue-store-mock.360ffc14.css" /><script type="module">(()=>{const e=document.querySelector(".menu-btn");e&&e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),e.classList.toggle("show")})})();(async()=>(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.toggle("dark",!0):document.documentElement.classList.toggle("dark",!1),document.getElementById("theme-toggle")?.addEventListener("click",()=>{const e=document.documentElement.classList.contains("dark");document.documentElement.classList.toggle("dark",!e),localStorage.setItem("theme",e?"":"dark")})))();(async()=>{if(!navigator.share)return;const e=document.querySelector("title")?.innerText||"",t=document.querySelector('meta[name="description"]')?.getAttribute("content")||"",c=document.querySelector('link[rel="canonical"]')?.getAttribute("href")||location.href,n=document.getElementById("share-page");n?.classList.toggle("hidden",!1),n?.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),navigator.share({title:e,text:t,url:c}).then(()=>console.log("Successful share")).catch(a=>console.log("Error sharing",a))})})();
</script></head>

  <body class="bg-white dark:bg-gray-800 dark:text-gray-200">
    <div class="sticky top-0 px-4 bg-white dark:bg-gray-800 dark:text-gray-200">
  <header class="container flex justify-between py-4 mx-auto md:max-w-4xl">
    <a href="/" class="text-gray-400 hover:no-underline visited:text-gray-400">AVIL13.com</a>

    <div class="flex items-center">
      <button id="theme-toggle" type="button" aria-label="Theme switcher" class="p-0.5 text-sm text-gray-500 rounded-lg dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700">
        <svg class="hidden w-5 h-5 dark:block" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
        </svg>
        <svg class="w-5 h-5 dark:hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path>
        </svg>
      </button>
      
    </div>
    

    
  </header>
</div>

    

    <main class="container max-w-4xl px-2 py-4 mx-auto prose md:px-0 lg:prose-xl dark:prose-invert">
      <article>
        <h1 id="–∫–∞–∫-—è-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª-–∫–ª–∞—Å—Å-–∑–∞–≤–∏—Å—è—â–∏–π-–æ—Ç-vuex-store-–∏—Å–ø–æ–ª—å–∑—É—è-jestmock">–ö–∞–∫ —è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –∫–ª–∞—Å—Å –∑–∞–≤–∏—Å—è—â–∏–π –æ—Ç vuex-store –∏—Å–ø–æ–ª—å–∑—É—è jest.mock</h1>
<p>–ò–ª–∏ –∫–∞–∫ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –º–æ–∫ —Ä–∞–±–æ—á–µ–≥–æ vuex —Å—Ç–æ—Ä–∞.</p>
<h2 id="–∑–∞–¥–∞—á–∞">–ó–∞–¥–∞—á–∞:</h2>
<p>–ë—ã–ª –Ω–∞–ø–∏—Å–∞–Ω <code>vue-router</code> —Ö—É–∫ - –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç–æ—Ä–µ —Ä–µ—à–∞–ª, –º–æ–∂–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –Ω–µ—Ç.</p>
<p>–í—Å–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±—ã–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –≤ –ø—Ä–∏–º–µ—Ä–µ –æ–Ω –∏–º–µ–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ <code>Status</code>. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–æ—Ä–∞ –∏ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã, —Å–æ–æ–±—â–∞–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∫–æ–µ —Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –Ω–µ—Ç.</p>
<p>–ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–æ–≤, —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç–æ—Ä–µ.</p>
<blockquote>
<p>–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–∫–æ–≤ vuex-—Å—Ç–æ—Ä–∞, –∫–æ–≥–¥–∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥—Ä—É–≥–∏–µ –∫–ª–∞—Å—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.</p>
</blockquote>
<h3 id="–∫–∞–∫-–≤—Å–µ-—ç—Ç–æ-–º–æ–∂–Ω–æ-–Ω–∞–ø–∏—Å–∞—Ç—å-–ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é-–Ω–∞-–ø—Ä–∏–º–µ—Ä–µ">–ö–∞–∫ –≤—Å–µ —ç—Ç–æ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ</h3>
<p>–ü–æ –ø—É–Ω–∫—Ç–∞–º:</p>
<ul>
<li>1: —Å–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥, —á—Ç–æ –±—ã –ø–æ–Ω—è—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.</li>
<li>2: –¥–æ–±–∞–≤–∏–º –≤ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –±–æ–π–ª–µ—Ä–ø–ª–µ–π—Ç, –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –º–æ–∫ –Ω–∞—à–µ–≥–æ —Å—Ç–æ—Ä–∞</li>
</ul>
<h3 id="–ø–∏—à–µ–º-–∫–æ–¥-—Å—Ç–æ—Ä–∞-–∫–ª–∞—Å—Å–∞-–∏-—Ç–µ—Å—Ç—ã-–ø–æ–∫–∞-–Ω–µ-—Ä–∞–±–æ—Ç–∞—é—â–∏–µ">–ü–∏—à–µ–º –∫–æ–¥ —Å—Ç–æ—Ä–∞, –∫–ª–∞—Å—Å–∞ –∏ —Ç–µ—Å—Ç—ã (–ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ)</h3>
<blockquote>
<p>–ø—Ä–∏–º–µ—Ä –Ω–∞ TypeScript –ø–æ—ç—Ç–æ–º—É –≤ —Ñ–∞–π–ª–∞—Ö <code>@</code> –∞–ª–∏–∞—Å –¥–ª—è <code>src/</code></p>
</blockquote>
<pre class="language-ts"><code is:raw="" class="language-ts"><span class="token comment">// @/store.ts</span>

<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex</span><span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// —Å–≤–æ–π—Å—Ç–≤–æ —Å—Ç–æ—Ä–∞ –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–∞—Å—Å–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
    docs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'–í–∞–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç'</span><span class="token punctuation">,</span>
      isSigned<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// –º–µ—Ç–æ–¥ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
    <span class="token function">setDocs</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> docs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>docs <span class="token operator">=</span> docs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class="language-ts"><code is:raw="" class="language-ts"><span class="token comment">// @/lib/status.ts</span>

<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token punctuation">;</span> <span class="token comment">// –≥—Ä—É–∑–∏–º —Å—Ç–æ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ–≥–æ</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IDoc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/types'</span>

<span class="token keyword">class</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * –ì–µ—Ç—Ç–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–æ—Ä–∞
   */</span>
  <span class="token keyword">get</span> <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IDoc<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>docs<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// –¥–∞–ª–µ—ë –∏–¥—É—Ç –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç–∞—Ç—É—Å—ã</span>
  <span class="token comment">// –æ–Ω–∏ –Ω–∞–º –Ω–µ –≤–∞–∂–Ω—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, —á—Ç–æ –±—ã –±—ã–ª</span>

  <span class="token comment">/**
   * –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∞–Ω
   */</span>
  <span class="token function">hasSignedDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>doc <span class="token operator">=></span> doc<span class="token punctuation">.</span>isSigned<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class="language-ts"><code is:raw="" class="language-ts"><span class="token comment">// @/lib/status.spec.ts</span>
<span class="token comment">// ... –¢—É—Ç –±—É–¥–µ—Ç –º–æ–∫ —Å—Ç–æ—Ä–∞</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Status <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./status'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">factory</span> <span class="token operator">=</span> <span class="token punctuation">(</span>mockData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ... —Ç—É—Ç –ø–æ–∑–∂–µ –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∫–∞</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// –î–≤–∞ —Ç–µ—Å—Ç–∞ –≤—ã–∑—ã–≤–∞—é—â–∏—Ö –º–µ—Ç–æ–¥ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–ª–∞—Å—Å–∞</span>
it<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// [methodName, expectResult, mockData]</span>
  <span class="token punctuation">[</span> <span class="token string">'hasSignedDocument'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token string">'hasSignedDocument'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token punctuation">{</span> isSigned<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'statusTest'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> expectResult<span class="token punctuation">,</span> mockData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>mockData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> wrapper<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>expectResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h2 id="—Å–æ–∑–¥–∞–Ω–∏–µ-–º–æ–∫–æ–≤-–Ω–∞-jest">–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫–æ–≤ –Ω–∞ Jest</h2>
<p>–í Jest –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–∫–∏.</p>
<p>–î–ª—è —Ç–æ–≥–æ —á—Ç–æ –±—ã —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤ –Ω–∞—à–µ–º —Ç–µ—Å—Ç–µ –º—ã –¥–ª—è –Ω–∞—á–∞–ª–∞, –µ—â—ë –¥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ <code>import ...</code> –Ω–∞–ø–∏—à–µ–º –º–æ–∫ —Å—Ç–æ—Ä–∞. –ù–æ –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–∫–∞, Jest –≤—Å–µ –∫–æ–Ω–µ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤ - –¥–µ–ª–∞–µ—Ç –ø—É—Å—Ç—ã–º–∏.</p>
<pre class="language-ts"><code is:raw="" class="language-ts"><span class="token comment">// @/lib/status.spec.ts</span>

<span class="token keyword">let</span> originalStoreModule<span class="token punctuation">;</span> <span class="token comment">// - —ç—Ç–æ –Ω–∞—à —Å—Ç–æ—Ä, –∑–∞–ø–æ–º–Ω–∏ –µ–≥–æ</span>

jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">'@/store'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–æ—Ä</span>
  originalStoreModule <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">requireActual</span><span class="token punctuation">(</span><span class="token string">'@/store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    __esModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Use it when dealing with esModules</span>
    <span class="token operator">...</span>originalStoreModule<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Status <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./status'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre>
<p>–¢–µ–ø–µ—Ä—å –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ–ø–∏—Å–∞—Ç—å –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é <code>factory</code> - –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—ë—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Å –Ω—É–∂–Ω—ã–º–∏ –Ω–∞–º –¥–∞–Ω–Ω—ã–º–∏.</p>
<pre class="language-ts"><code is:raw="" class="language-ts"><span class="token comment">// @/lib/status.spec.ts</span>

<span class="token comment">// ...</span>
<span class="token keyword">const</span> <span class="token function-variable function">factory</span> <span class="token operator">=</span> <span class="token punctuation">(</span>mockData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</span>
  originalStoreModule<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setDocs'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// –Ω–∞–ø–æ–ª–Ω—è–µ–º –º–æ–∫ —Å—Ç–æ—Ä–∞ –¥–∞–Ω–Ω—ã–º–∏</span>
  originalStoreModule<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setDocs'</span><span class="token punctuation">,</span> mockData<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span></code></pre>
<h3 id="–∏—Ç–æ–≥">–ò—Ç–æ–≥</h3>
<p>–≤ –∏—Ç–æ–≥–µ —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:</p>
<pre class="language-ts"><code is:raw="" class="language-ts"><span class="token comment">// @/lib/status.spec.ts</span>
<span class="token keyword">let</span> originalStoreModule<span class="token punctuation">;</span>

jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">'@/store'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  originalStoreModule <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">requireActual</span><span class="token punctuation">(</span><span class="token string">'@/store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    __esModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>originalStoreModule<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Status <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./status'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">factory</span> <span class="token operator">=</span> <span class="token punctuation">(</span>mockData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  originalStoreModule<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setDocs'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  originalStoreModule<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setDocs'</span><span class="token punctuation">,</span> mockData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


it<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// [methodName, expectResult, mockData]</span>
  <span class="token punctuation">[</span> <span class="token string">'hasSignedDocument'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token string">'hasSignedDocument'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> isSigned<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'statusTest'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> expectResult<span class="token punctuation">,</span> mockData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>mockData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> wrapper<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>expectResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h1 id="ps">P.S.</h1>
<p>–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã, –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞</p>
<pre class="language-plaintext"><code is:raw="" class="language-plaintext">ReferenceError: Cannot access 'originalStoreModule' before initialization</code></pre>
<p>–°–≤—è–∑–∞–Ω–æ —ç—Ç–æ —Å —Ç–µ–º, —á—Ç–æ –≤—Å–µ –≤—ã–∑–æ–≤—ã <code>jest.mock</code> –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ —Å—Ç–∞–≤—è—Ç—Å—è –≤ —Å–∞–º–æ–µ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞.
–ü–æ–ª—É—á–∏—Ç—Å—è —Ç–∞–∫, —á—Ç–æ –º—ã –≤—ã–∑—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é <code>originalStoreModule</code>, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –µ—ë –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏.
–≠—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–∞ –ø—É—Ç—ë–º –∏–∑–º–µ–Ω–µ–Ω–∏—è <code>let</code> –Ω–∞ <code>var</code>. –¢–æ–≥–¥–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Ö–æ–∏—Å—Ç–∏–Ω–≥(–ø–æ–¥—ä–µ–º –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö) –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –±—É–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.</p>
      </article>
    </main>

    <footer class="container max-w-4xl py-8 mx-auto mt-16 mb-8 border-t border-b border-gray-200 dark:border-gray-700 md:px-0">
  <div class="flex px-6">
    <div class="flex flex-col w-full space-y-4 md:space-y-0 md:flex-row" aria-label="Footer page navigation">
  <a class="flex w-1/2" href="/blog/old/coffeescript-v-nodejs" title="coffeescript –≤ node.js">
        <span aria-hidden="true">&laquo;</span>
        <span class="truncate">coffeescript –≤ node.js</span>
      </a>
  <div>
  <a href="https://avil13.com/blog/2020/06-vue-store-mock/" id="share-page" class="hidden">
    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path>
    </svg>
  </a>

  
</div>
  <a class="flex justify-end w-1/2" href="/blog/2022/07-home-pi-server" title="üçä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–∞—à–Ω–µ–≥–æ Transmission —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Orange PI">
        <span class="truncate">üçä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–∞—à–Ω–µ–≥–æ Transmission —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Orange PI</span>
        <span aria-hidden="true">&raquo;</span>
      </a>
</div>
  </div>
</footer>

    <script>
        (async () => {
          window.addEventListener("load", () => {
            if ("serviceWorker" in navigator) {
              navigator.serviceWorker.register("/service-worker.js");
            }
          });
        })();
      </script>
  </body>
</html>